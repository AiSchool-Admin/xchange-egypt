# سيناريوهات اختبار منصة Xchange Egypt

## بيانات المستخدمين التجريبيين

| المستخدم | البريد الإلكتروني | كلمة المرور | الدور | المحافظة |
|----------|-------------------|-------------|-------|----------|
| أحمد محمد | test1@xchange.eg | Test@123456 | بائع/مشتري | القاهرة |
| سارة أحمد | test2@xchange.eg | Test@123456 | بائع/مشتري | الإسكندرية |
| محمد علي | test3@xchange.eg | Test@123456 | بائع/مشتري | الجيزة |
| فاطمة حسن | test4@xchange.eg | Test@123456 | بائع/مشتري | المنصورة |
| خالد إبراهيم | test5@xchange.eg | Test@123456 | بائع/مشتري | أسيوط |
| admin | admin@xchange.eg | Admin@123456 | مدير | - |

---

## السيناريو 1: المقايضة المباشرة (Barter Exchange)

### الهدف
اختبار عملية المقايضة بين مستخدمين

### الخطوات

#### المستخدم: أحمد (test1@xchange.eg)

**الخطوة 1: تسجيل الدخول**
```
البريد: test1@xchange.eg
كلمة المرور: Test@123456
```

**الخطوة 2: إضافة منتج للمقايضة**
```json
{
  "title": "iPhone 14 Pro Max 256GB",
  "description": "أيفون 14 برو ماكس، لون أسود، حالة ممتازة، ضمان سنة، مع جميع الملحقات الأصلية",
  "category": "إلكترونيات > هواتف > Apple",
  "condition": "LIKE_NEW",
  "estimatedValue": 45000,
  "images": ["iphone14-front.jpg", "iphone14-back.jpg", "iphone14-box.jpg"],
  "listingType": "BARTER",
  "governorate": "القاهرة",
  "city": "مدينة نصر",
  "district": "الحي الثامن"
}
```

**الخطوة 3: تحديد ما يريده بالمقابل**
```json
{
  "wantedItems": [
    {
      "description": "MacBook Pro أو Air",
      "category": "إلكترونيات > لابتوب",
      "minValue": 40000,
      "maxValue": 50000,
      "condition": ["NEW", "LIKE_NEW"]
    },
    {
      "description": "PlayStation 5 + ألعاب",
      "category": "إلكترونيات > ألعاب",
      "minValue": 35000,
      "maxValue": 45000
    }
  ]
}
```

#### المستخدم: سارة (test2@xchange.eg)

**الخطوة 4: تصفح العروض المتاحة**
- البحث عن "iPhone" في القاهرة
- عرض تفاصيل منتج أحمد

**الخطوة 5: تقديم عرض مقايضة**
```json
{
  "offeredItem": {
    "title": "MacBook Air M2 2023",
    "description": "ماك بوك اير M2، 8GB RAM، 256GB SSD، لون فضي، ضمان Apple Care+",
    "estimatedValue": 42000,
    "condition": "LIKE_NEW",
    "images": ["macbook-1.jpg", "macbook-2.jpg"]
  },
  "cashDifference": 3000,
  "message": "مرحباً، أعرض عليك MacBook Air M2 + 3000 جنيه فرق"
}
```

#### المستخدم: أحمد (test1@xchange.eg)

**الخطوة 6: مراجعة العرض**
- فتح الإشعارات
- عرض تفاصيل عرض سارة
- قبول/رفض/تفاوض

**الخطوة 7: قبول العرض**
```json
{
  "action": "ACCEPT",
  "meetingPoint": {
    "location": "سيتي ستارز مول - القاهرة",
    "date": "2024-01-15",
    "time": "18:00"
  }
}
```

### النتيجة المتوقعة
- ✅ إشعار لكلا الطرفين بإتمام الاتفاق
- ✅ تحديث حالة المنتجين إلى "TRADED"
- ✅ إضافة نقاط للمستخدمين
- ✅ طلب تقييم متبادل

---

## السيناريو 2: المزاد العلني (Auction)

### الهدف
اختبار نظام المزادات الكامل

### الخطوات

#### المستخدم: محمد (test3@xchange.eg)

**الخطوة 1: إنشاء مزاد**
```json
{
  "title": "ساعة Rolex Submariner أصلية",
  "description": "ساعة رولكس صب مارينر، موديل 2020، مع الصندوق والأوراق الأصلية، حالة ممتازة",
  "category": "إكسسوارات > ساعات > فاخرة",
  "condition": "LIKE_NEW",
  "images": ["rolex-1.jpg", "rolex-2.jpg", "rolex-papers.jpg"],
  "listingType": "AUCTION",
  "auctionSettings": {
    "startingPrice": 150000,
    "reservePrice": 200000,
    "minimumBidIncrement": 5000,
    "startDate": "2024-01-10T10:00:00",
    "endDate": "2024-01-17T22:00:00",
    "autoExtend": true,
    "extensionMinutes": 5
  },
  "governorate": "الجيزة",
  "city": "الدقي"
}
```

#### المستخدم: أحمد (test1@xchange.eg)

**الخطوة 2: المزايدة الأولى**
```json
{
  "bidAmount": 155000,
  "maxAutoBid": 180000
}
```

#### المستخدم: سارة (test2@xchange.eg)

**الخطوة 3: المزايدة الثانية**
```json
{
  "bidAmount": 165000,
  "maxAutoBid": 195000
}
```

#### المستخدم: فاطمة (test4@xchange.eg)

**الخطوة 4: المزايدة النهائية (قبل الإغلاق بدقيقتين)**
```json
{
  "bidAmount": 205000
}
```

### النتيجة المتوقعة
- ✅ تمديد المزاد 5 دقائق (Auto-extend)
- ✅ إشعارات للمزايدين السابقين
- ✅ فوز فاطمة بالمزاد
- ✅ إشعار للبائع محمد
- ✅ بدء عملية الدفع والتسليم

---

## السيناريو 3: البيع المباشر مع الدفع الإلكتروني

### الهدف
اختبار عملية الشراء المباشر والدفع

### الخطوات

#### المستخدم: خالد (test5@xchange.eg)

**الخطوة 1: إضافة منتج للبيع**
```json
{
  "title": "تلفزيون Samsung 65 بوصة QLED 4K",
  "description": "سامسونج 65 بوصة، QLED، 4K، Smart TV، موديل 2023، ضمان سنتين",
  "category": "إلكترونيات > تلفزيونات",
  "condition": "NEW",
  "price": 35000,
  "listingType": "DIRECT_SALE",
  "negotiable": true,
  "images": ["tv-1.jpg", "tv-2.jpg"],
  "governorate": "أسيوط",
  "city": "أسيوط",
  "shipping": {
    "available": true,
    "cost": 500,
    "freeAbove": 30000
  }
}
```

#### المستخدم: أحمد (test1@xchange.eg)

**الخطوة 2: طلب الشراء**
```json
{
  "itemId": "tv-item-id",
  "quantity": 1,
  "shippingAddress": {
    "fullName": "أحمد محمد علي",
    "phone": "01012345678",
    "governorate": "القاهرة",
    "city": "مدينة نصر",
    "street": "شارع مصطفى النحاس",
    "building": "15",
    "floor": "3",
    "apartment": "7",
    "landmark": "بجوار مسجد الحصري"
  }
}
```

**الخطوة 3: الدفع عبر Fawry**
```json
{
  "paymentMethod": "FAWRY",
  "amount": 35000,
  "referenceNumber": "FAWRY_REF_123456"
}
```

**بيانات اختبار Fawry:**
```
رقم المرجع: 123456789012
المبلغ: 35,000 جنيه
الحالة: PAID
```

#### المستخدم: خالد (test5@xchange.eg)

**الخطوة 4: تأكيد الشحن**
```json
{
  "orderId": "order-id",
  "shippingProvider": "أرامكس",
  "trackingNumber": "ARX123456789EG",
  "estimatedDelivery": "2024-01-18"
}
```

#### المستخدم: أحمد (test1@xchange.eg)

**الخطوة 5: تأكيد الاستلام والتقييم**
```json
{
  "orderId": "order-id",
  "status": "DELIVERED",
  "rating": {
    "score": 5,
    "comment": "بائع ممتاز، المنتج مطابق للوصف، شحن سريع",
    "aspects": {
      "communication": 5,
      "productQuality": 5,
      "shipping": 4,
      "packaging": 5
    }
  }
}
```

### النتيجة المتوقعة
- ✅ تحويل المبلغ لمحفظة البائع
- ✅ خصم عمولة المنصة (2.5%)
- ✅ تحديث تقييم البائع
- ✅ إضافة نقاط للمشتري

---

## السيناريو 4: المطابقة الذكية (Smart Matching)

### الهدف
اختبار نظام المطابقة الذكية بين العرض والطلب

### الخطوات

#### المستخدم: فاطمة (test4@xchange.eg)

**الخطوة 1: إنشاء طلب شراء (Demand)**
```json
{
  "title": "أبحث عن سيارة هيونداي إلنترا",
  "description": "أبحث عن سيارة هيونداي إلنترا موديل 2020 أو أحدث، لون أبيض أو فضي، أوتوماتيك",
  "category": "سيارات > هيونداي",
  "listingType": "REVERSE_AUCTION",
  "requirements": {
    "brand": "هيونداي",
    "model": "إلنترا",
    "yearMin": 2020,
    "yearMax": 2024,
    "transmission": "AUTOMATIC",
    "colors": ["أبيض", "فضي"],
    "kmMax": 100000,
    "budgetMin": 350000,
    "budgetMax": 450000
  },
  "governorate": "المنصورة",
  "validUntil": "2024-02-01"
}
```

#### المستخدم: محمد (test3@xchange.eg)

**الخطوة 2: إضافة سيارة للبيع (Supply)**
```json
{
  "title": "هيونداي إلنترا 2021 فابريكا",
  "description": "هيونداي إلنترا 2021، لون فضي، أوتوماتيك، 45,000 كم، فابريكا بالكامل، صيانة الوكالة",
  "category": "سيارات > هيونداي",
  "listingType": "DIRECT_SALE",
  "price": 420000,
  "negotiable": true,
  "specifications": {
    "brand": "هيونداي",
    "model": "إلنترا",
    "year": 2021,
    "transmission": "AUTOMATIC",
    "color": "فضي",
    "km": 45000,
    "fuelType": "بنزين"
  },
  "images": ["car-1.jpg", "car-2.jpg", "car-3.jpg", "car-interior.jpg"],
  "governorate": "الجيزة"
}
```

### النتيجة المتوقعة (تلقائي)
- ✅ إشعار لفاطمة: "عرض جديد يطابق طلبك! (92% تطابق)"
- ✅ إشعار لمحمد: "سيارتك تطابق طلب مشتري! (92% تطابق)"
- ✅ عرض تفاصيل المطابقة لكلا الطرفين

#### المستخدم: فاطمة (test4@xchange.eg)

**الخطوة 3: التواصل مع البائع**
```json
{
  "matchId": "match-id",
  "action": "START_CHAT",
  "message": "مرحباً، أنا مهتمة بالسيارة. هل يمكن المعاينة؟"
}
```

---

## السيناريو 5: المحفظة والنقاط (Wallet & Gamification)

### الهدف
اختبار نظام المحفظة والنقاط والمكافآت

### الخطوات

#### المستخدم: سارة (test2@xchange.eg)

**الخطوة 1: شحن المحفظة**
```json
{
  "action": "DEPOSIT",
  "amount": 5000,
  "paymentMethod": "VODAFONE_CASH",
  "phoneNumber": "01012345678"
}
```

**بيانات اختبار Vodafone Cash:**
```
رقم الهاتف: 01012345678
المبلغ: 5,000 جنيه
PIN: 123456
```

**الخطوة 2: عرض رصيد المحفظة**
```
الرصيد المتاح: 5,000 جنيه
الرصيد المعلق: 0 جنيه
إجمالي الأرباح: 12,500 جنيه
```

**الخطوة 3: سحب الأرباح**
```json
{
  "action": "WITHDRAW",
  "amount": 2000,
  "method": "BANK_TRANSFER",
  "bankDetails": {
    "bankName": "البنك الأهلي المصري",
    "accountNumber": "1234567890123456",
    "accountName": "سارة أحمد محمد"
  }
}
```

**الخطوة 4: عرض النقاط والمستوى**
```
المستوى الحالي: فضي (Silver)
النقاط: 2,450 نقطة
للمستوى التالي: 550 نقطة
المعاملات المكتملة: 15
تقييم البائع: 4.8/5
```

**الخطوة 5: استبدال النقاط**
```json
{
  "action": "REDEEM_POINTS",
  "points": 1000,
  "reward": {
    "type": "DISCOUNT_COUPON",
    "value": 50,
    "validFor": "NEXT_PURCHASE"
  }
}
```

### النتيجة المتوقعة
- ✅ تحديث رصيد المحفظة
- ✅ إشعار بنجاح العملية
- ✅ سجل المعاملات محدث
- ✅ كوبون خصم متاح للاستخدام

---

## بيانات اختبار إضافية

### أرقام بطاقات اختبار (Paymob)
```
Visa: 4987654321098769
Expiry: 12/25
CVV: 123
الاسم: TEST CARD

Mastercard: 5123456789012346
Expiry: 12/25
CVV: 123
```

### أرقام Fawry للاختبار
```
Reference: 999000111222
Amount: Any
Status: SUCCESS
```

### أرقام InstaPay للاختبار
```
IPA: test@instapay
Amount: Any
OTP: 123456
```

---

## قائمة التحقق للاختبار

### تسجيل المستخدم
- [ ] تسجيل حساب جديد
- [ ] تأكيد البريد الإلكتروني
- [ ] إكمال الملف الشخصي
- [ ] رفع صورة الهوية للتوثيق

### إدارة المنتجات
- [ ] إضافة منتج جديد
- [ ] رفع صور المنتج
- [ ] تعديل بيانات المنتج
- [ ] حذف منتج

### المقايضة
- [ ] إنشاء عرض مقايضة
- [ ] استلام عروض
- [ ] التفاوض
- [ ] إتمام المقايضة

### المزادات
- [ ] إنشاء مزاد
- [ ] المزايدة
- [ ] التمديد التلقائي
- [ ] إتمام المزاد

### الدفع
- [ ] الدفع بـ Fawry
- [ ] الدفع بـ Vodafone Cash
- [ ] الدفع بالبطاقة
- [ ] استرداد المبلغ

### المحفظة
- [ ] شحن المحفظة
- [ ] سحب الأرباح
- [ ] عرض سجل المعاملات

### الإشعارات
- [ ] إشعارات التطبيق
- [ ] إشعارات البريد
- [ ] إشعارات SMS

---

## ملاحظات للمختبرين

1. **البيئة:** استخدم بيئة الاختبار (staging) وليس الإنتاج
2. **البيانات:** جميع البيانات المالية وهمية للاختبار فقط
3. **التوقيت:** بعض العمليات تحتاج وقت (مثل المطابقة الذكية)
4. **التقارير:** سجل أي مشاكل مع لقطات شاشة
5. **التنظيف:** احذف بيانات الاختبار بعد الانتهاء
