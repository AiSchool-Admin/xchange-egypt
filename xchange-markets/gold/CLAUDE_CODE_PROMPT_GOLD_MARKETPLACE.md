# ğŸ¯ PROMPT: ØªØ·ÙˆÙŠØ± Ø³ÙˆÙ‚ Ø§Ù„Ø°Ù‡Ø¨ Ø¹Ù„Ù‰ Ù…Ù†ØµØ© Xchange

## Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

Ø£Ù†Øª Ù…Ø·ÙˆØ± Full-Stack Ø®Ø¨ÙŠØ± ØªØ¹Ù…Ù„ Ø¹Ù„Ù‰ ØªØ·ÙˆÙŠØ± **Ø³ÙˆÙ‚ Ø§Ù„Ø°Ù‡Ø¨ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ** Ø¹Ù„Ù‰ Ù…Ù†ØµØ© Xchange Egypt. Ù…Ù‡Ù…ØªÙƒ Ù‡ÙŠ Ø¨Ù†Ø§Ø¡ Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø°Ù‡Ø¨ (Ø¬Ø¯ÙŠØ¯ ÙˆÙ…Ø³ØªØ¹Ù…Ù„) Ù…Ø¹ Ù…Ù…ÙŠØ²Ø§Øª ØªÙ†Ø§ÙØ³ÙŠØ© ÙØ±ÙŠØ¯Ø© ØªØ¬Ø¹Ù„ Xchange Ø£ÙØ¶Ù„ Ù…Ù†ØµØ© Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø°Ù‡Ø¨ ÙÙŠ Ù…ØµØ±.

---

## ğŸ“š Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ù…ØªØ§Ø­Ø©

Ù„Ø¯ÙŠÙƒ **Ø­Ø²Ù…Ø© ØªØ·ÙˆÙŠØ± ÙƒØ§Ù…Ù„Ø©** ÙÙŠ Ø§Ù„Ù…Ù„Ù:
- `xchange-gold-marketplace-dev-package.md`

Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø²Ù…Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰:
1. âœ… Database Schema (Prisma) ÙƒØ§Ù…Ù„
2. âœ… API Endpoints Documentation Ù…Ø¹ Ø£Ù…Ø«Ù„Ø©
3. âœ… User Stories Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©
4. âœ… Integration Guides (Metals-API, XRF, Certificates)
5. âœ… Business Logic & Algorithms Ø¬Ø§Ù‡Ø²Ø©
6. âœ… Testing Scenarios
7. âœ… Security & Compliance guidelines

**Ø§Ù‚Ø±Ø£ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø£ÙŠ ØªØ·ÙˆÙŠØ±.**

---

## ğŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹

### Stack Ø§Ù„ØªÙ‚Ù†ÙŠ:
- **Frontend:** Next.js 14+ (App Router)
- **Backend:** Express.js
- **Database:** PostgreSQL + Prisma ORM
- **Language:** TypeScript
- **Authentication:** JWT
- **File Storage:** Google Cloud Storage Ø£Ùˆ AWS S3
- **Real-time:** Socket.io (Ù„Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙÙˆØ±ÙŠØ©)

### Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©:
```
xchange/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                    # Next.js frontend
â”‚   â””â”€â”€ api/                    # Express backend
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ database/              # Prisma schema
â”‚   â”œâ”€â”€ ui/                    # Shared UI components
â”‚   â””â”€â”€ types/                 # Shared TypeScript types
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma          # Database schema
â”‚   â”œâ”€â”€ migrations/            # Database migrations
â”‚   â””â”€â”€ seed.ts                # Seed data
â””â”€â”€ docs/                      # Documentation
```

---

## ğŸ¯ Ø®Ø·Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ø±Ø­Ù„ÙŠØ©

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Database & Core Models** (Ø£ÙˆÙ„ÙˆÙŠØ© Ù‚ØµÙˆÙ‰)

**Ø§Ù„Ù…Ù‡Ù…Ø©:**
Ù‚Ù… Ø¨ØªØ·ÙˆÙŠØ± Database Schema Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø°Ù‡Ø¨ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Prisma.

**Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©:**

1. **Ø£Ø¶Ù Models Ø§Ù„Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ `prisma/schema.prisma`:**
   - Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù‚Ø³Ù… "1. Database Schema" Ù…Ù† Ø­Ø²Ù…Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±
   - Ø§Ù†Ø³Ø® Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ Models Ø§Ù„ØªØ§Ù„ÙŠØ©:
     - `GoldProduct`
     - `GoldCategory`
     - `GoldPriceHistory`
     - `WorkmanshipFeeTemplate`
     - `BarterListing`
     - `BarterNegotiation`
     - `GoldSavingsPlan`
     - `SavingsPayment`
     - `XRFTestResult`
     - `AuthenticationCertificate`
     - `GoldInsurance`
     - `InsuranceClaim`
   
   - **Ù…Ù‡Ù…:** ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¥Ù„Ù‰ `User` model:
     ```prisma
     model User {
       // ... existing fields
       
       // Gold-specific
       goldProductsSelling     GoldProduct[]       @relation("GoldSeller")
       barterListingsOffering  BarterListing[]     @relation("BarterOffering")
       barterListingsReceived  BarterListing[]     @relation("BarterCounterparty")
       barterNegotiations      BarterNegotiation[]
       savingsPlans            GoldSavingsPlan[]
       goldInsurances          GoldInsurance[]
       goldTraderVerified      Boolean             @default(false)
       goldTraderLevel         String?
       totalGoldTradeValue     Float               @default(0)
       preferredKarat          GoldKarat?
       notifyPriceAlerts       Boolean             @default(false)
       priceAlertThreshold     Float?
     }
     ```

2. **Ø£Ù†Ø´Ø¦ Migration:**
   ```bash
   npx prisma migrate dev --name add_gold_marketplace
   ```

3. **Ø£Ù†Ø´Ø¦ Seed Data Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±:**
   - ÙÙŠ `prisma/seed.ts`ØŒ Ø£Ø¶Ù:
     - 3-5 ÙØ¦Ø§Øª Ø°Ù‡Ø¨ (Ø³Ø¨Ø§Ø¦ÙƒØŒ Ù…Ø´ØºÙˆÙ„Ø§ØªØŒ Ø¬Ù†ÙŠÙ‡Ø§Øª Ø°Ù‡Ø¨)
     - 10+ Ù…Ù†ØªØ¬Ø§Øª Ø°Ù‡Ø¨ Ù†Ù…ÙˆØ°Ø¬ÙŠØ© Ø¨Ø£ÙˆØ²Ø§Ù† ÙˆØ¹ÙŠØ§Ø±Ø§Øª Ù…Ø®ØªÙ„ÙØ©
     - 2-3 Ù‚ÙˆØ§Ù„Ø¨ Ù…ØµÙ†Ø¹ÙŠØ© (WorkmanshipFeeTemplate)
     - Ø³Ø¬Ù„Ø§Øª Ø£Ø³Ø¹Ø§Ø± ØªØ§Ø±ÙŠØ®ÙŠØ© (Ø¢Ø®Ø± 30 ÙŠÙˆÙ…)

4. **Ø§Ø®ØªØ¨Ø± Ø§Ù„Ù€ Schema:**
   ```bash
   npm run db:seed
   npm run db:studio  # Ø§ÙØªØ­ Prisma Studio Ù„Ù„ØªØ£ÙƒØ¯
   ```

**Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù‚Ø¨ÙˆÙ„:**
- âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ Models ØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ø¨Ù†Ø¬Ø§Ø­
- âœ… Migrations ØªØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø£Ø®Ø·Ø§Ø¡
- âœ… Seed data ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ Ø¨Ù†Ø¬Ø§Ø­
- âœ… Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ ØµØ­ÙŠØ­Ø© (Foreign Keys)

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Gold Pricing Service** (Ø­Ø±Ø¬)

**Ø§Ù„Ù…Ù‡Ù…Ø©:**
ØªØ·ÙˆÙŠØ± Ø®Ø¯Ù…Ø© Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙÙˆØ±ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Metals-API Ù…Ø¹ Ù†Ø¸Ø§Ù… Cache Ø°ÙƒÙŠ.

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. **Ø£Ù†Ø´Ø¦ Ù…Ù„Ù `apps/api/src/services/goldPriceService.ts`:**
   - Ø§Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ Ù…Ù† Ø§Ù„Ù‚Ø³Ù… "4.1 Metals-API Integration"
   - Ø£Ø¶Ù:
     - Ø¯Ø§Ù„Ø© `getCurrentGoldPrice()` - ØªØ³ØªØ¯Ø¹ÙŠ Metals-API
     - Ø¯Ø§Ù„Ø© `getGoldPrice()` - Ù…Ø¹ Cache Ù„Ù…Ø¯Ø© 60 Ø«Ø§Ù†ÙŠØ©
     - Ø¯Ø§Ù„Ø© `saveToHistory()` - Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙÙŠ Database

2. **Environment Variables:**
   Ø£Ø¶Ù Ø¥Ù„Ù‰ `.env`:
   ```env
   METALS_API_KEY=your_api_key_here
   METALS_API_BASE_URL=https://metals-api.com/api
   ```

3. **Ø£Ù†Ø´Ø¦ API Endpoint Ù„Ù„Ø£Ø³Ø¹Ø§Ø±:**
   - `GET /api/gold/prices/current` - Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠØ©
   - `GET /api/gold/prices/history` - ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£Ø³Ø¹Ø§Ø±
   - `POST /api/gold/prices/calculate` - Ø­Ø³Ø§Ø¨ Ø³Ø¹Ø± Ù…Ù†ØªØ¬

4. **Cron Job Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø³Ø¹Ø§Ø±:**
   ```typescript
   // apps/api/src/cron/updateGoldPrices.ts
   import cron from 'node-cron';
   import { getGoldPrice } from '../services/goldPriceService';
   
   // ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
   cron.schedule('* * * * *', async () => {
     await getGoldPrice();
   });
   ```

5. **WebSocket Ù„Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±:**
   - Ø§Ø³ØªØ®Ø¯Ù… Socket.io Ù„Ø¨Ø« ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªØµÙ„ÙŠÙ†
   ```typescript
   io.on('connection', (socket) => {
     socket.on('subscribe-gold-prices', () => {
       // Send price updates every 60s
     });
   });
   ```

**Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù‚Ø¨ÙˆÙ„:**
- âœ… API ØªØ³ØªØ±Ø¬Ø¹ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù…Ù† Metals-API Ø¨Ù†Ø¬Ø§Ø­
- âœ… Cache ÙŠØ¹Ù…Ù„ (Ù„Ø§ ÙŠØ³ØªØ¯Ø¹ÙŠ API Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø±Ø© ÙƒÙ„ 60 Ø«Ø§Ù†ÙŠØ©)
- âœ… Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ØªÙØ­ÙØ¸ ÙÙŠ `GoldPriceHistory` table
- âœ… Endpoints ØªØ¹ÙŠØ¯ Response ØµØ­ÙŠØ­Ø©
- âœ… WebSocket ÙŠØ¨Ø« Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Product Management APIs**

**Ø§Ù„Ù…Ù‡Ù…Ø©:**
ØªØ·ÙˆÙŠØ± APIs Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø°Ù‡Ø¨ (CRUD operations).

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. **Ø£Ù†Ø´Ø¦ Controller:**
   `apps/api/src/controllers/goldProductController.ts`

2. **Ø·ÙˆØ± Ø§Ù„Ù€ Endpoints Ø§Ù„ØªØ§Ù„ÙŠØ©:**

   **POST /api/gold/products** - Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
   ```typescript
   async function createGoldProduct(req, res) {
     // 1. Validate input
     // 2. Calculate initial price using goldPriceService
     // 3. Set verificationStatus to PENDING
     // 4. Create product in database
     // 5. Return product with auto-calculated prices
   }
   ```

   **GET /api/gold/products** - Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ø¹ ÙÙ„ØªØ±Ø©
   ```typescript
   async function getGoldProducts(req, res) {
     // Support filters:
     // - karat (K24, K21, K18, K14)
     // - type (BULLION, COIN, JEWELRY)
     // - condition (NEW, EXCELLENT, GOOD, FAIR, SCRAP)
     // - minWeight, maxWeight
     // - minPrice, maxPrice
     // - verificationStatus
     // 
     // Support sorting:
     // - price_asc, price_desc
     // - weight_asc, weight_desc
     // - created_asc, created_desc
     //
     // Support pagination:
     // - page, limit
   }
   ```

   **GET /api/gold/products/:id** - ØªÙØ§ØµÙŠÙ„ Ù…Ù†ØªØ¬ ÙˆØ§Ø­Ø¯
   ```typescript
   async function getGoldProduct(req, res) {
     // Include:
     // - Product details
     // - Seller info (name, rating, level)
     // - XRF test results (if verified)
     // - Certificate info
     // - Category
     // - Reviews
   }
   ```

   **PUT /api/gold/products/:id** - ØªØ¹Ø¯ÙŠÙ„ Ù…Ù†ØªØ¬
   ```typescript
   async function updateGoldProduct(req, res) {
     // Only allow seller or admin
     // Recalculate price if weight/karat changed
   }
   ```

   **DELETE /api/gold/products/:id** - Ø­Ø°Ù Ù…Ù†ØªØ¬
   ```typescript
   async function deleteGoldProduct(req, res) {
     // Soft delete (set isAvailable = false)
     // Only allow if no active orders
   }
   ```

3. **Ø£Ø¶Ù Validation Middleware:**
   - Ø§Ø³ØªØ®Ø¯Ù… `zod` Ù„Ù„Ù€ validation
   ```typescript
   import { z } from 'zod';
   
   const createGoldProductSchema = z.object({
     type: z.enum(['BULLION', 'COIN', 'JEWELRY', 'CUSTOM']),
     karat: z.enum(['K24', 'K21', 'K18', 'K14']),
     condition: z.enum(['NEW', 'EXCELLENT', 'GOOD', 'FAIR', 'SCRAP']),
     grossWeight: z.number().positive(),
     netWeight: z.number().positive(),
     workmanshipFee: z.number().nonnegative(),
     // ... more fields
   });
   ```

4. **Ø£Ø¶Ù Authorization:**
   - ÙÙ‚Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† ÙŠÙ…ÙƒÙ†Ù‡Ù… Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª
   - ÙÙ‚Ø· ØµØ§Ø­Ø¨ Ø§Ù„Ù…Ù†ØªØ¬ Ø£Ùˆ Admin ÙŠÙ…ÙƒÙ†Ù‡Ù… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„/Ø§Ù„Ø­Ø°Ù

**Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù‚Ø¨ÙˆÙ„:**
- âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ CRUD operations ØªØ¹Ù…Ù„
- âœ… Validation ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
- âœ… Filtering & Sorting & Pagination ØªØ¹Ù…Ù„
- âœ… Authorization Ù…Ø­ÙƒÙ…Ø©
- âœ… Ø§Ù„Ø³Ø¹Ø± ÙŠÙØ­Ø³Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 4: Pricing Calculator Service**

**Ø§Ù„Ù…Ù‡Ù…Ø©:**
ØªØ·ÙˆÙŠØ± Ø®Ø¯Ù…Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ Ø¨Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©.

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. **Ø£Ù†Ø´Ø¦ `apps/api/src/services/pricingService.ts`:**
   - Ø§Ù†Ø³Ø® Ø¯Ø§Ù„Ø© `calculateGoldPrice()` Ù…Ù† Ø­Ø²Ù…Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± (Ø§Ù„Ù‚Ø³Ù… 5.1)
   - Ø§Ù†Ø³Ø® Ø¯Ø§Ù„Ø© `calculateBuybackPrice()`

2. **Ø£Ø¶Ù API Endpoint:**
   **POST /api/gold/prices/calculate**
   ```typescript
   async function calculatePrice(req, res) {
     const {
       karat,
       grossWeight,
       netWeight,
       workmanshipFeePerGram,
       hasGems,
       gemsValue,
       condition,
       includeVAT
     } = req.body;
     
     const result = await calculateGoldPrice({...});
     
     res.json({ success: true, data: result });
   }
   ```

3. **Ø£Ø¶Ù Unit Tests:**
   ```typescript
   // tests/services/pricingService.test.ts
   describe('Pricing Service', () => {
     test('calculates correct price for 10g 21K jewelry', async () => {
       // Test from dev package section 6.1
     });
     
     test('applies condition discount correctly', async () => {
       // ...
     });
   });
   ```

**Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù‚Ø¨ÙˆÙ„:**
- âœ… Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø© 100%
- âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ù…Ø­Ø³ÙˆØ¨Ø© (Ø°Ù‡Ø¨ØŒ Ù…ØµÙ†Ø¹ÙŠØ©ØŒ Ø¶Ø±Ø§Ø¦Ø¨ØŒ Ø¯Ù…ØºØ©)
- âœ… Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª ØªÙØ·Ø¨Ù‚ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©
- âœ… Unit Tests ØªÙ…Ø± Ø¨Ù†Ø¬Ø§Ø­

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 5: XRF Verification System**

**Ø§Ù„Ù…Ù‡Ù…Ø©:**
Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£ØµØ§Ù„Ø© Ø§Ù„Ø°Ù‡Ø¨ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… XRF.

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. **Ø£Ù†Ø´Ø¦ `apps/api/src/services/xrfService.ts`:**
   - Ù„Ù„Ø¢Ù†ØŒ Ø§Ø³ØªØ®Ø¯Ù… Mock Data (Ø³ÙŠØªÙ… Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù„Ø§Ø­Ù‚Ø§Ù‹ Ù…Ø¹ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„ÙØ¹Ù„ÙŠ)
   ```typescript
   async function performXRFTest(productId: string) {
     // Mock XRF test results
     return {
       goldPercentage: 87.5,  // For 21K
       silverPercentage: 10.2,
       copperPercentage: 2.3,
       testDuration: 120  // seconds
     };
   }
   ```

2. **Ø£Ù†Ø´Ø¦ Verification Endpoint:**
   **POST /api/gold/verify/xrf**
   ```typescript
   async function verifyXRF(req, res) {
     // 1. Check user is technician or admin
     // 2. Get product
     // 3. Perform XRF test (or use mock)
     // 4. Calculate actual karat from gold percentage
     // 5. Compare with expected karat (tolerance Â±0.5)
     // 6. Save XRFTestResult
     // 7. Update product verificationStatus
     // 8. Generate certificate if verified
     // 9. Return result
   }
   ```

3. **Certificate Generation:**
   - Ø£Ù†Ø´Ø¦ `apps/api/src/services/certificateService.ts`
   - Ø§Ø³ØªØ®Ø¯Ù… `qrcode` package Ù„Ø¥Ù†Ø´Ø§Ø¡ QR Code
   - Ø§Ø³ØªØ®Ø¯Ù… `pdfkit` Ù„Ø¥Ù†Ø´Ø§Ø¡ PDF Certificate
   ```typescript
   async function generateCertificate(productId: string) {
     // 1. Generate unique certificate number
     // 2. Create QR code with verification URL
     // 3. Generate PDF certificate
     // 4. Upload to cloud storage
     // 5. Save to AuthenticationCertificate table
     // 6. Return certificate number
   }
   ```

4. **Certificate Verification Endpoint:**
   **GET /api/gold/verify/certificate/:certificateNumber**

**Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù‚Ø¨ÙˆÙ„:**
- âœ… XRF verification endpoint ÙŠØ¹Ù…Ù„
- âœ… Certificate ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- âœ… QR Code ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ­ÙŠØ­Ø©
- âœ… PDF certificate Ø§Ø­ØªØ±Ø§ÙÙŠ
- âœ… Verification endpoint ÙŠØ¹ÙŠØ¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø©

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 6: Barter System (Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù‚Ø§ÙŠØ¶Ø©)** â­

**Ø§Ù„Ù…Ù‡Ù…Ø©:**
ØªØ·ÙˆÙŠØ± Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù‚Ø§ÙŠØ¶Ø© Ø§Ù„ÙØ±ÙŠØ¯ - Ø§Ù„Ù…ÙŠØ²Ø© Ø§Ù„ØªÙ†Ø§ÙØ³ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©!

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. **Ø£Ù†Ø´Ø¦ `apps/api/src/services/barterService.ts`:**
   - Ø§Ù†Ø³Ø® `findBarterMatches()` Ù…Ù† Ø­Ø²Ù…Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±
   - Ø§Ù†Ø³Ø® `calculateBarterPriceDifference()`

2. **Barter Endpoints:**

   **POST /api/gold/barter/create** - Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ø±Ø¶ Ù…Ù‚Ø§ÙŠØ¶Ø©
   ```typescript
   async function createBarter(req, res) {
     const {
       barterType,           // "GOLD_TO_MOBILE"
       goldItemsOffered,     // ["gold-prod-1", "gold-prod-2"]
       seekingItemType,      // "MOBILE"
       seekingItemId,        // Optional specific item
       seekingValue,         // 35000 EGP
       seekingDescription,   // "iPhone 15 Pro 256GB"
       expiresInDays         // 7
     } = req.body;
     
     // 1. Validate user owns all gold items
     // 2. Calculate total gold value
     // 3. Create BarterListing
     // 4. Set expiry date
     // 5. Return listing
   }
   ```

   **GET /api/gold/barter/matches** - Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø·Ø§Ø¨Ù‚Ø§Øª
   ```typescript
   async function findMatches(req, res) {
     // Use barterService.findBarterMatches()
     // Return sorted by matchScore (highest first)
   }
   ```

   **POST /api/gold/barter/:id/accept** - Ù‚Ø¨ÙˆÙ„ Ø¹Ø±Ø¶
   ```typescript
   async function acceptBarter(req, res) {
     // 1. Validate counterparty owns the item
     // 2. Update barter status to ACCEPTED
     // 3. Initiate Escrow for both items
     // 4. Schedule inspection
     // 5. Return next steps
   }
   ```

   **POST /api/gold/barter/:id/negotiate** - Ø§Ù„ØªÙØ§ÙˆØ¶
   ```typescript
   async function negotiate(req, res) {
     // 1. Create BarterNegotiation record
     // 2. Update barter status to NEGOTIATING
     // 3. Notify other party
     // 4. Return negotiation details
   }
   ```

3. **Matching Algorithm:**
   - Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù‚Ø³Ù… 5.2 ÙÙŠ Ø­Ø²Ù…Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±
   - ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø³Ø§Ø¨ `matchScore` Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­:
     - 60% Ù…Ù† Ø§Ù„ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø³Ø¹Ø±ÙŠ
     - 30% Ù…Ù† Ø³Ù…Ø¹Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
     - 10% Ø¨ÙˆÙ†Øµ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ÙˆØ«Ù‚ÙŠÙ†

**Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù‚Ø¨ÙˆÙ„:**
- âœ… ÙŠÙ…ÙƒÙ† Ø¥Ù†Ø´Ø§Ø¡ barter listings
- âœ… Matching algorithm ÙŠØ¹ÙŠØ¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø±ØªØ¨Ø©
- âœ… Accept/Negotiate endpoints ØªØ¹Ù…Ù„
- âœ… Escrow ÙŠØªÙ… ØªÙØ¹ÙŠÙ„Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- âœ… Integration Ù…Ø¹ Ø£Ø³ÙˆØ§Ù‚ Ø£Ø®Ø±Ù‰ (Mobile/Car) ÙŠØ¹Ù…Ù„

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 7: Gold Savings Program**

**Ø§Ù„Ù…Ù‡Ù…Ø©:**
Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ø§Ø¯Ø®Ø§Ø± Ø§Ù„Ø´Ù‡Ø±ÙŠ - Ø´Ø±Ø§Ø¡ Ø§Ù„Ø°Ù‡Ø¨ Ø¨Ø§Ù„ØªÙ‚Ø³ÙŠØ·.

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. **Savings Endpoints:**

   **POST /api/gold/savings/plans** - Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø©
   ```typescript
   async function createSavingsPlan(req, res) {
     const { targetGrams, targetKarat, monthlyAmount } = req.body;
     
     // 1. Get current gold price
     // 2. Calculate estimated completion months
     // 3. Create GoldSavingsPlan
     // 4. Return plan details
   }
   ```

   **POST /api/gold/savings/plans/:id/pay** - Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø©
   ```typescript
   async function addPayment(req, res) {
     const { amount, paymentMethod } = req.body;
     
     // 1. Process payment
     // 2. Get current gold price
     // 3. Calculate grams added (amount / price)
     // 4. Update plan progress
     // 5. Create SavingsPayment record
     // 6. Check if target reached
     // 7. Return updated plan
   }
   ```

   **GET /api/gold/savings/plans/:id** - ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø©
   ```typescript
   async function getSavingsPlan(req, res) {
     // Include:
     // - Progress (current grams, target, %)
     // - Payment history
     // - Current value at today's price
     // - Unrealized gain/loss
     // - Estimated completion date
   }
   ```

2. **Auto-debit Integration:**
   - ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…ØµØ±ÙŠØ© (Paymob/Fawry)
   - Cron job Ø´Ù‡Ø±ÙŠ Ù„Ø®ØµÙ… Ø§Ù„Ù…Ø¨Ù„Øº ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

**Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù‚Ø¨ÙˆÙ„:**
- âœ… ÙŠÙ…ÙƒÙ† Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø· Ø§Ø¯Ø®Ø§Ø±
- âœ… Ø§Ù„Ø¯ÙØ¹Ø§Øª ØªÙØ¶Ø§Ù Ø¨Ù†Ø¬Ø§Ø­
- âœ… Ø§Ù„Ø¬Ø±Ø§Ù…Ø§Øª ØªÙØ­Ø³Ø¨ Ø¨Ø¯Ù‚Ø©
- âœ… Progress ÙŠÙØ­Ø¯Ø« ÙÙŠ real-time
- âœ… Unrealized gain/loss Ù…Ø­Ø³ÙˆØ¨

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 8: Buyback System**

**Ø§Ù„Ù…Ù‡Ù…Ø©:**
Ù†Ø¸Ø§Ù… Ø¥Ø¹Ø§Ø¯Ø© Ø´Ø±Ø§Ø¡ Ø§Ù„Ø°Ù‡Ø¨ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†.

**Ø§Ù„Ø®Ø·ÙˆØ§Øª:**

1. **Buyback Endpoints:**

   **POST /api/gold/buyback/quote** - Ø·Ù„Ø¨ Ø¹Ø±Ø¶ Ø³Ø¹Ø±
   ```typescript
   async function getBuybackQuote(req, res) {
     const {
       karat,
       weight,
       condition,
       hasDamgha,
       hasOriginalReceipt,
       photos
     } = req.body;
     
     // 1. Use calculateBuybackPrice() service
     // 2. Generate quote ID
     // 3. Set 24h expiry
     // 4. Return price range
   }
   ```

   **POST /api/gold/buyback/:quoteId/accept** - Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¹Ø±Ø¶
   ```typescript
   async function acceptBuyback(req, res) {
     // 1. Validate quote still valid
     // 2. Schedule XRF verification appointment
     // 3. Return appointment details
   }
   ```

2. **AI Photo Analysis (Optional - Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ):**
   - Ø§Ø³ØªØ®Ø¯Ø§Ù… Vision API Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø© Ù…Ù† Ø§Ù„ØµÙˆØ±
   - Ù„Ù„Ø¢Ù†ØŒ Ø§Ø¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ input Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

**Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù‚Ø¨ÙˆÙ„:**
- âœ… Quote generation ÙŠØ¹Ù…Ù„
- âœ… Ø§Ù„Ø³Ø¹Ø± Ù…Ø­Ø³ÙˆØ¨ Ø¨Ø¯Ù‚Ø©
- âœ… 24h expiry ÙŠÙÙØ±Ø¶
- âœ… Appointment scheduling ÙŠØ¹Ù…Ù„

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 9: Frontend Development**

**Ø§Ù„Ù…Ù‡Ù…Ø©:**
Ø¨Ù†Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Next.js 14.

**Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**

1. **Gold Marketplace Home** (`/gold`)
   - Ø¹Ø±Ø¶ Ø§Ù„ÙØ¦Ø§Øª (Ø³Ø¨Ø§Ø¦ÙƒØŒ Ù…Ø´ØºÙˆÙ„Ø§ØªØŒ Ø¬Ù†ÙŠÙ‡Ø§Øª)
   - Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø°Ù‡Ø¨ Ø§Ù„Ø­ÙŠØ© (real-time WebSocket)
   - Featured products
   - Search bar

2. **Product Listing** (`/gold/products`)
   - Grid/List view toggle
   - Filters sidebar (karat, type, price, weight)
   - Sorting options
   - Pagination

3. **Product Detail** (`/gold/products/[id]`)
   - Image gallery
   - Full specifications
   - Price breakdown table
   - XRF verification badge
   - Certificate download button
   - Seller info
   - Reviews section
   - "Buy Now" / "Add to Cart" buttons
   - "Create Barter" button

4. **Create Barter** (`/gold/barter/create`)
   - Select gold items to offer
   - Choose what you're seeking (Mobile/Car/Scrap/Gold)
   - Set target value
   - Preview matches
   - Submit listing

5. **Barter Matches** (`/gold/barter/matches`)
   - List of matching offers
   - Match score indicator
   - Price difference calculator
   - Accept/Negotiate buttons

6. **Savings Program** (`/gold/savings`)
   - Create plan form
   - Active plans dashboard
   - Payment history
   - Progress charts (Chart.js)

7. **Sell Gold** (`/gold/sell`)
   - Upload photos
   - Enter details (karat, weight, condition)
   - Get instant quote
   - Schedule verification

**UI Components Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**

```typescript
// components/gold/GoldPriceTicker.tsx
// Real-time price display using WebSocket

// components/gold/ProductCard.tsx
// Reusable product card with image, price, karat badge

// components/gold/KaratBadge.tsx
// Visual badge for karat (24K, 21K, etc.)

// components/gold/VerificationBadge.tsx
// Shows XRF verified status

// components/gold/PriceBreakdown.tsx
// Table showing price components (gold + workmanship + tax)

// components/gold/BarterMatchCard.tsx
// Card showing barter match with score

// components/gold/SavingsProgress.tsx
// Progress bar for savings plan
```

**Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù‚Ø¨ÙˆÙ„:**
- âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙØ­Ø§Øª responsive
- âœ… Arabic RTL support
- âœ… Real-time price updates
- âœ… Dark/Light mode support
- âœ… Loading states
- âœ… Error handling
- âœ… Accessibility (a11y)

---

### **Ø§Ù„Ù…Ø±Ø­Ù„Ø© 10: Testing & Quality Assurance**

**Ø§Ù„Ù…Ù‡Ù…Ø©:**
Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø´Ø§Ù…Ù„Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¬ÙˆØ¯Ø©.

**Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª:**

1. **Unit Tests:**
   ```bash
   # Test all services
   npm run test:unit
   
   # Coverage should be >80%
   npm run test:coverage
   ```

2. **Integration Tests:**
   ```bash
   # Test API endpoints
   npm run test:integration
   ```

3. **E2E Tests:**
   - Ø§Ø³ØªØ®Ø¯Ù… Playwright Ø£Ùˆ Cypress
   - Ø§Ø®ØªØ¨Ø± User Journeys Ø§Ù„ÙƒØ§Ù…Ù„Ø©:
     - Ø´Ø±Ø§Ø¡ Ø³Ø¨ÙŠÙƒØ© Ø°Ù‡Ø¨
     - Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù‚Ø§ÙŠØ¶Ø©
     - Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ø¯Ø®Ø§Ø±

4. **Load Testing:**
   - Ø§Ø³ØªØ®Ø¯Ù… k6 Ø£Ùˆ Artillery
   - Ø§Ø®ØªØ¨Ø± 1000 concurrent users
   - ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø³ØªØ¬Ø§Ø¨Ø© <500ms

**Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù‚Ø¨ÙˆÙ„:**
- âœ… Unit test coverage >80%
- âœ… Ø¬Ù…ÙŠØ¹ Integration tests ØªÙ…Ø±
- âœ… E2E tests Ù„Ù„Ù€ critical paths ØªÙ…Ø±
- âœ… No performance regressions

---

## ğŸ” Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø¬ÙˆØ¯Ø©

### Security Checklist:
- [ ] Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ endpoints Ù…Ø­Ù…ÙŠØ© Ø¨Ù€ Authentication
- [ ] Authorization Ù…Ø­ÙƒÙ…Ø© (RBAC)
- [ ] Input validation Ø¹Ù„Ù‰ ÙƒÙ„ endpoint
- [ ] SQL Injection prevention (Prisma handles this)
- [ ] XSS prevention (sanitize inputs)
- [ ] Rate limiting Ø¹Ù„Ù‰ Pricing API
- [ ] Sensitive data encrypted (Damgha numbers, certificates)
- [ ] Audit logging Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø±Ø¬Ø© (XRF verification, Ø¨ÙŠØ¹/Ø´Ø±Ø§Ø¡)
- [ ] HTTPS only ÙÙŠ production
- [ ] Environment variables Ù…Ø­Ù…ÙŠØ©

### Code Quality:
- [ ] TypeScript strict mode enabled
- [ ] ESLint configured and passing
- [ ] Prettier for code formatting
- [ ] No console.logs ÙÙŠ production code
- [ ] Proper error handling (try/catch)
- [ ] Meaningful variable names
- [ ] Code comments Ù„Ù„Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©
- [ ] Follow DRY principle
- [ ] Modular code (single responsibility)

### Performance:
- [ ] Database queries optimized (use indexes)
- [ ] N+1 query problem avoided
- [ ] Caching strategy implemented (Redis)
- [ ] Image optimization (Next.js Image component)
- [ ] Lazy loading Ù„Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø«Ù‚ÙŠÙ„Ø©
- [ ] Code splitting
- [ ] Bundle size <500KB (gzipped)

---

## ğŸ“ Ù…Ø¹Ø§ÙŠÙŠØ± Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

Ù‚Ø¨Ù„ Ø§Ø¹ØªØ¨Ø§Ø± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ "Ù…ÙƒØªÙ…Ù„"ØŒ ØªØ£ÙƒØ¯ Ù…Ù†:

### âœ… Functional Requirements:
1. ÙŠÙ…ÙƒÙ† Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ØªØµÙØ­ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø°Ù‡Ø¨ Ù…Ø¹ ÙÙ„ØªØ±Ø© Ù…ØªÙ‚Ø¯Ù…Ø©
2. Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ØªÙØ­Ø¯Ø« ÙƒÙ„ 60 Ø«Ø§Ù†ÙŠØ© Ù…Ù† Metals-API
3. Ù†Ø¸Ø§Ù… XRF Verification ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ÙƒØ§Ù…Ù„
4. Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„Ø£ØµØ§Ù„Ø© ØªÙÙ†Ø´Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ø¹ QR Code
5. Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù‚Ø§ÙŠØ¶Ø© ÙŠØ±Ø¨Ø· Ø¨ÙŠÙ† Gold â†” Mobile â†” Car
6. Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ø§Ø¯Ø®Ø§Ø± ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„Ø¯ÙØ¹Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©
7. Ù†Ø¸Ø§Ù… Buyback ÙŠÙ‚Ø¯Ù… Ø¹Ø±ÙˆØ¶ Ø£Ø³Ø¹Ø§Ø± Ø¯Ù‚ÙŠÙ‚Ø©
8. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø³Ø¹Ø±ÙŠØ© Ø¯Ù‚ÙŠÙ‚Ø© 100%
9. Integration Ù…Ø¹ Payment Gateways Ø§Ù„Ù…ØµØ±ÙŠØ©
10. Arabic language support ÙƒØ§Ù…Ù„

### âœ… Non-Functional Requirements:
1. Response time <500ms Ù„Ù„ØµÙØ­Ø§Øª
2. Database query time <100ms
3. Uptime >99.9%
4. Security vulnerabilities = 0
5. Test coverage >80%
6. Mobile responsive (100% Ù…Ù† Ø§Ù„ØµÙØ­Ø§Øª)
7. Accessibility score >90 (Lighthouse)
8. SEO optimized

---

## ğŸš€ Ø£ÙˆØ§Ù…Ø± Ù…ÙÙŠØ¯Ø©

```bash
# Development
npm run dev              # Start dev server
npm run dev:api          # Start API only
npm run dev:web          # Start Next.js only

# Database
npm run db:migrate       # Run migrations
npm run db:seed          # Seed database
npm run db:studio        # Open Prisma Studio
npm run db:reset         # Reset database

# Testing
npm run test             # Run all tests
npm run test:unit        # Unit tests only
npm run test:e2e         # E2E tests
npm run test:coverage    # Coverage report

# Build
npm run build            # Build for production
npm run start            # Start production server

# Code Quality
npm run lint             # Run ESLint
npm run format           # Format with Prettier
npm run type-check       # TypeScript type checking
```

---

## ğŸ“Š ØªØªØ¨Ø¹ Ø§Ù„ØªÙ‚Ø¯Ù…

Ø£Ù†Ø´Ø¦ Ù…Ù„Ù `PROGRESS.md` ÙˆØ­Ø¯Ø«Ù‡ Ø¨Ø¹Ø¯ ÙƒÙ„ Ù…Ø±Ø­Ù„Ø©:

```markdown
# Gold Marketplace Development Progress

## Phase 1: Database & Core Models
- [x] Prisma schema added
- [x] Migrations created
- [x] Seed data working
- [x] All relationships tested

## Phase 2: Gold Pricing Service
- [x] Metals-API integration
- [x] Caching implemented
- [x] Pricing endpoints
- [x] WebSocket real-time updates
- [ ] Price alert notifications

## Phase 3: Product Management
- [x] CRUD operations
- [x] Filtering & sorting
- [x] Validation
- [ ] Image upload

...
```

---

## ğŸ’¡ Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©

1. **Ø§Ù‚Ø±Ø£ Ø­Ø²Ù…Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± Ø£ÙˆÙ„Ø§Ù‹:**
   - Ù„Ø§ ØªØ¨Ø¯Ø£ Ø§Ù„ÙƒÙˆØ¯ Ù‚Ø¨Ù„ ÙÙ‡Ù… ÙƒØ§Ù…Ù„ Ø§Ù„Ù€ architecture
   - Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ù…Ø«Ù„Ø© ÙƒÙ€ reference

2. **Ø§ØªØ¨Ø¹ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨:**
   - Ù„Ø§ ØªÙ‚ÙØ² Ù„Ù„Ù…Ø±Ø­Ù„Ø© 6 Ù‚Ø¨Ù„ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ù…Ø±Ø§Ø­Ù„ 1-5
   - ÙƒÙ„ Ù…Ø±Ø­Ù„Ø© ØªØ¨Ù†ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©

3. **Ø§Ø®ØªØ¨Ø± Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±:**
   - Ù„Ø§ ØªÙƒØªØ¨ 1000 Ø³Ø·Ø± Ø«Ù… ØªØ®ØªØ¨Ø±
   - Ø§Ø®ØªØ¨Ø± Ø¨Ø¹Ø¯ ÙƒÙ„ feature ØµØºÙŠØ±

4. **Ø§Ø³ØªØ®Ø¯Ù… TypeScript Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­:**
   - Define types Ù„ÙƒÙ„ Ø´ÙŠØ¡
   - Ù„Ø§ ØªØ³ØªØ®Ø¯Ù… `any`

5. **Documentation:**
   - Ø§ÙƒØªØ¨ JSDoc comments Ù„Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©
   - Ø­Ø¯Ø« README.md Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±

6. **Git Commits:**
   - Commit messages ÙˆØ§Ø¶Ø­Ø©
   - Commit Ø¨Ø¹Ø¯ ÙƒÙ„ feature/fix

7. **Ø§Ø³ØªÙØ¯ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯:**
   - Ø±Ø§Ø¬Ø¹ ÙƒÙŠÙ ØªÙ… ØªØ·ÙˆÙŠØ± Mobile/Scrap marketplaces
   - Reuse components Ùˆ services

---

## ğŸ¯ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª

### High Priority (Ø§ÙØ¹Ù„Ù‡Ø§ Ø£ÙˆÙ„Ø§Ù‹):
1. Database Schema
2. Gold Pricing Service
3. Product Management APIs
4. Pricing Calculator
5. XRF Verification

### Medium Priority:
6. Barter System
7. Savings Program
8. Buyback System
9. Frontend

### Low Priority (ÙŠÙ…ÙƒÙ† ØªØ£Ø¬ÙŠÙ„Ù‡Ø§):
10. Insurance System
11. Advanced Analytics
12. Blockchain integration

---

## â“ ÙÙŠ Ø­Ø§Ù„Ø© Ù…ÙˆØ§Ø¬Ù‡Ø© Ù…Ø´Ø§ÙƒÙ„

1. **Ø±Ø§Ø¬Ø¹ Ø­Ø²Ù…Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±** - Ø§Ù„Ø­Ù„ ØºØ§Ù„Ø¨Ø§Ù‹ Ù…ÙˆØ¬ÙˆØ¯
2. **ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ù…Ø«Ù„Ø©** ÙÙŠ Marketplaces Ø§Ù„Ø£Ø®Ø±Ù‰
3. **Ø§Ù‚Ø±Ø£ Prisma/Next.js documentation**
4. **Ø§Ø³Ø£Ù„Ù†ÙŠ** Ø¥Ø°Ø§ Ø§Ø­ØªØ¬Øª ØªÙˆØ¶ÙŠØ­

---

## ğŸ Ø§Ù„Ø®Ù„Ø§ØµØ©

Ø£Ù†Øª ØªØ¨Ù†ÙŠ **Ø£ÙØ¶Ù„ Ù…Ù†ØµØ© Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø°Ù‡Ø¨ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ÙÙŠ Ù…ØµØ±**. 

**Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„ÙØ±ÙŠØ¯Ø©:**
- âœ¨ Ù†Ø¸Ø§Ù… Ù…Ù‚Ø§ÙŠØ¶Ø© Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„ÙØ¦Ø§Øª (Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù„Ø¯Ù‰ Ø£ÙŠ Ù…Ù†Ø§ÙØ³)
- âœ¨ XRF verification Ø¥Ù„Ø²Ø§Ù…ÙŠ (Ø£Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø«Ù‚Ø©)
- âœ¨ Ø´ÙØ§ÙÙŠØ© ØªØ³Ø¹ÙŠØ± ÙƒØ§Ù…Ù„Ø© (breakdown Ù„ÙƒÙ„ Ù…ÙƒÙˆÙ†)
- âœ¨ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ø¯Ø®Ø§Ø± Ø°Ù‡Ø¨ÙŠ (ÙØ±ÙŠØ¯ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚)
- âœ¨ Ø¶Ù…Ø§Ù† Ø¥Ø¹Ø§Ø¯Ø© Ø´Ø±Ø§Ø¡ (Ù„Ø§ Ø®Ø³Ø§Ø±Ø© Ù…ØµÙ†Ø¹ÙŠØ©)

**ØªØ°ÙƒØ±:**
- Ø§ØªØ¨Ø¹ Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨
- Ø§Ù‚Ø±Ø£ Ø­Ø²Ù…Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±
- Ø§Ø®ØªØ¨Ø± ÙƒÙ„ feature
- Ø§ÙƒØªØ¨ ÙƒÙˆØ¯ Ù†Ø¸ÙŠÙ ÙˆÙ…ÙˆØ«Ù‚

**Good luck! ğŸš€**
