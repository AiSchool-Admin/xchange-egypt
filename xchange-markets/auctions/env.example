# ═══════════════════════════════════════════════════════════════
# XCHANGE AUCTION MARKETPLACE - ENVIRONMENT VARIABLES
# ═══════════════════════════════════════════════════════════════
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
# ═══════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────
# DATABASE
# ───────────────────────────────────────────────────────────────
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL="postgresql://postgres:password@localhost:5432/xchange_auction?schema=public"

# ───────────────────────────────────────────────────────────────
# JWT AUTHENTICATION
# ───────────────────────────────────────────────────────────────
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET="your-super-secret-jwt-key-min-32-characters-long"
JWT_EXPIRES_IN="7d"
JWT_REFRESH_EXPIRES_IN="30d"

# ───────────────────────────────────────────────────────────────
# PAYMENT GATEWAYS
# ───────────────────────────────────────────────────────────────

# Paymob - Primary Payment Gateway
# Get from: https://accept.paymob.com/portal/en/merchant/credentials
PAYMOB_API_KEY="your_paymob_api_key"
PAYMOB_INTEGRATION_ID="your_integration_id"
PAYMOB_IFRAME_ID="your_iframe_id"
PAYMOB_HMAC_SECRET="your_hmac_secret"

# Fawry Integration (if separate from Paymob)
FAWRY_INTEGRATION_ID="your_fawry_integration_id"

# ───────────────────────────────────────────────────────────────
# SHIPPING & LOGISTICS
# ───────────────────────────────────────────────────────────────

# Bosta - Delivery Partner
# Get from: https://business.bosta.co/settings/integrations
BOSTA_API_KEY="your_bosta_api_key"
BOSTA_WEBHOOK_SECRET="your_bosta_webhook_secret"

# ───────────────────────────────────────────────────────────────
# SMS & NOTIFICATIONS
# ───────────────────────────────────────────────────────────────

# Twilio SMS
# Get from: https://www.twilio.com/console
TWILIO_ACCOUNT_SID="your_twilio_account_sid"
TWILIO_AUTH_TOKEN="your_twilio_auth_token"
TWILIO_PHONE_NUMBER="+1234567890"

# Alternative: Vodafone Egypt SMS API
# VODAFONE_SMS_API_KEY="your_vodafone_api_key"
# VODAFONE_SMS_SENDER="YourBrand"

# ───────────────────────────────────────────────────────────────
# EMAIL
# ───────────────────────────────────────────────────────────────

# SendGrid
# Get from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY="your_sendgrid_api_key"
SENDGRID_FROM_EMAIL="noreply@xchange.eg"
SENDGRID_FROM_NAME="Xchange Auctions"

# ───────────────────────────────────────────────────────────────
# CLOUD STORAGE
# ───────────────────────────────────────────────────────────────

# Cloudinary - Image/Video CDN
# Get from: https://cloudinary.com/console
CLOUDINARY_CLOUD_NAME="your_cloud_name"
CLOUDINARY_API_KEY="your_cloudinary_api_key"
CLOUDINARY_API_SECRET="your_cloudinary_api_secret"

# ───────────────────────────────────────────────────────────────
# MAPS & GEOCODING
# ───────────────────────────────────────────────────────────────

# Google Maps API
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_MAPS_API_KEY="your_google_maps_api_key"

# ───────────────────────────────────────────────────────────────
# REDIS (Optional - for caching & queues)
# ───────────────────────────────────────────────────────────────

REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""

# ───────────────────────────────────────────────────────────────
# APPLICATION SETTINGS
# ───────────────────────────────────────────────────────────────

NODE_ENV="development"  # development | production | test
PORT="3000"
FRONTEND_URL="http://localhost:3001"

# WebSocket URL (for frontend)
NEXT_PUBLIC_WS_URL="ws://localhost:3000"
NEXT_PUBLIC_API_URL="http://localhost:3000/api/v1"

# ───────────────────────────────────────────────────────────────
# FEATURE FLAGS
# ───────────────────────────────────────────────────────────────

ENABLE_SEALED_BID_AUCTIONS="true"
ENABLE_AUTO_PROXY_BIDDING="true"
ENABLE_ANTI_SNIPER="true"
ENABLE_FRAUD_DETECTION="true"
ENABLE_EMAIL_NOTIFICATIONS="true"
ENABLE_SMS_NOTIFICATIONS="true"

# ───────────────────────────────────────────────────────────────
# BUSINESS CONFIGURATION
# ───────────────────────────────────────────────────────────────

# Auction Settings
MIN_AUCTION_DURATION_DAYS="3"
MAX_AUCTION_DURATION_DAYS="30"
ANTI_SNIPER_EXTENSION_MINUTES="2"
MAX_ANTI_SNIPER_EXTENSIONS="10"

# Payment Settings
PAYMENT_DUE_HOURS="48"
ESCROW_HOLD_DAYS="7"

# Platform Fees (as decimals)
PLATFORM_FEE_CARS_BUYER="0.05"       # 5%
PLATFORM_FEE_CARS_SELLER="0.03"      # 3%
PLATFORM_FEE_REAL_ESTATE_BUYER="0.02" # 2%
PLATFORM_FEE_REAL_ESTATE_SELLER="0.01" # 1%
PLATFORM_FEE_DEFAULT_BUYER="0.05"    # 5%
PLATFORM_FEE_DEFAULT_SELLER="0.05"   # 5%

# Deposit Requirements (as decimals)
DEPOSIT_CARS_PERCENTAGE="0.10"       # 10%
DEPOSIT_REAL_ESTATE_PERCENTAGE="0.05" # 5%

# Fraud Detection
FRAUD_DETECTION_THRESHOLD="75"       # Score 0-100
FRAUD_AUTO_SUSPEND_THRESHOLD="85"    # Auto-suspend at this score

# ───────────────────────────────────────────────────────────────
# MONITORING & LOGGING
# ───────────────────────────────────────────────────────────────

# Sentry (Error Tracking) - Optional
# SENTRY_DSN="your_sentry_dsn"

# Log Level
LOG_LEVEL="info"  # error | warn | info | debug

# ───────────────────────────────────────────────────────────────
# DEVELOPMENT ONLY
# ───────────────────────────────────────────────────────────────

# Seed database with test data
SEED_DATABASE="false"

# Enable debug mode
DEBUG="false"

# Mock external APIs (for testing without real services)
MOCK_PAYMENT_GATEWAY="false"
MOCK_SMS_SERVICE="false"
MOCK_EMAIL_SERVICE="false"

# ───────────────────────────────────────────────────────────────
# PRODUCTION SECURITY
# ───────────────────────────────────────────────────────────────

# CORS Origins (comma-separated)
ALLOWED_ORIGINS="https://xchange.eg,https://www.xchange.eg"

# Rate Limiting
RATE_LIMIT_WINDOW_MS="900000"        # 15 minutes in ms
RATE_LIMIT_MAX_REQUESTS_UNAUTHENTICATED="100"
RATE_LIMIT_MAX_REQUESTS_AUTHENTICATED="2000"

# Session Secret
SESSION_SECRET="your-session-secret-min-32-characters"

# ═══════════════════════════════════════════════════════════════
# NOTES
# ═══════════════════════════════════════════════════════════════
# 
# 1. Generate secure secrets:
#    node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# 2. For production, use environment-specific .env files:
#    - .env.development
#    - .env.staging
#    - .env.production
#
# 3. Never commit .env files to Git! 
#    Add to .gitignore: .env*
#
# 4. Use a secret manager in production (AWS Secrets Manager, etc.)
#
# 5. Validate all environment variables on app startup
#
# ═══════════════════════════════════════════════════════════════
